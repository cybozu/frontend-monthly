---
title: Cybozu Frontend Monthly
date: "2020-10-27T17:00:00+09:00"
connpass: ""
hashTag: "#ã‚µã‚¤ãƒœã‚¦ã‚ºãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ãƒžãƒ³ã‚¹ãƒªãƒ¼"
no: 4
guest:
---

### [Webpack 5 release (2020-10-10)](https://webpack.js.org/blog/2020-10-10-webpack-5-release/)
- å…±æœ‰è€…: @\_\_sakito\_\_


å‚ç…§ï¼š[Webpack 5 release (2020-10-10)](https://webpack.js.org/blog/2020-10-10-webpack-5-release/)

10/10 ã« webpack 5 ãŒãƒªãƒªãƒ¼ã‚¹ã•ã‚Œã¾ã—ãŸ ðŸŽ‰

webpack 5 ã®ãƒªãƒªãƒ¼ã‚¹ã¯è¡Œã‚ã‚ŒãŸãŒã€ã¾ã ãƒã‚°ãŒå¤šãã‚ã‚Šã€webpack ã§ä½¿ç”¨ã™ã‚‹ loader ã‚„ plugin ã¯å¯¾å¿œãŒè¿½ã„ã¤ã„ã¦ã„ã¾ã›ã‚“ã€‚  
ãƒ‘ãƒƒã¨[webpack 5 é–¢é€£ã® Issue](https://github.com/webpack/webpack/issues?q=is%3Aissue+is%3Aopen+label%3Awebpack-5)ã‚’çœºã‚ã‚‹ã ã‘ã§ã‚‚ã€ã¾ã å¤šãã®å•é¡ŒãŒã‚ã‚‹ã“ã¨ãŒã‚ã‹ã‚Šã¾ã™ã€‚  
ãªã®ã§ã€webpack 5 ã‚’ä½¿ç”¨ã™ã‚‹ã®ã¯å®‰å…¨ã«ã„ããŸã‘ã‚Œã° 1,2 ãƒ¶æœˆã»ã©å¾…ã£ã¦ã‚‚ã‚ˆã„ã¨æ€ã„ã¾ã™ã€‚
ã„ã¾ã¯ã“ã®ãƒã‚°å¯¾å¿œã«ã‚ˆã‚Šã™ã§ã« webpack ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã¯ 5.2.0 ã«ãªã£ã¦ã„ã¾ã™ã€‚

### [webpack-dev-server](https://github.com/webpack/webpack-dev-server)

ç¾åœ¨ã® webpack-dev-server ã¯ webpack v5 å¯¾å¿œã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ãŒãŒã¾ã ãƒªãƒªãƒ¼ã‚¹ã•ã‚Œã¦ãªã„ã®ã§ã€å‹•ã‹ãªã„ã‚±ãƒ¼ã‚¹ãŒä½•ç‚¹ã‹ã‚ã‚Šã¾ã™ã€‚

- [webpack cli v4 ã¨ webpack-dev-server ã‚’çµ„ã¿åˆã‚ã›ãŸæ™‚ã«èµ·ãã‚‹å•é¡Œã«ã¤ã„ã¦ã® Issue](https://github.com/webpack/webpack-dev-server/issues/2759)

- [browserslist ä½¿ç”¨æ™‚ã®ãƒã‚°](https://github.com/webpack/webpack-dev-server/issues/2758)

### [webpack-cli](https://github.com/webpack/webpack-cli)

webpack v5 å¯¾å¿œã®ãŸã‚[v4 ã®ãƒªãƒªãƒ¼ã‚¹](https://github.com/webpack/webpack-cli/releases/tag/webpack-cli%404.0.0)ã¯ã•ã‚Œã¦ã„ã¾ã™ãŒã€ä¸Šè¨˜ã§ã‚‚æ›¸ã„ã¦ã„ã‚‹é€šã‚Šã€webpack dev server ã¨çµ„ã¿åˆã‚ã›ã‚‹ã¨ãƒã‚°ãŒã‚ã‚Šã¾ã™ã€‚

webpack cli v4 ã‹ã‚‰ webpack-dev-server ã®èµ·å‹•ã‚’`webpack serve`ã‚³ãƒžãƒ³ãƒ‰ã«çµ±åˆã™ã‚‹ã‚ˆã†ã«ãªã£ã¦ã„ã¾ã™ã€‚
[webpack serve ã‚³ãƒžãƒ³ãƒ‰ã®æ¡ˆå†…ã‚’ä¿ƒã™ã‚¨ãƒ©ãƒ¼æ–‡ã®å®Ÿè£…](https://github.com/webpack/webpack-dev-server/pull/2772)

æ–°æ©Ÿèƒ½ã¨ã—ã¦`webpack --analyze`ã‚³ãƒžãƒ³ãƒ‰ã§ã€[webpack-bundle-analyzer](https://github.com/webpack-contrib/webpack-bundle-analyzer)ã‚’ä½¿ç”¨ã—ã¦ã€å„ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®ãƒãƒ³ãƒ‰ãƒ«ã‚µã‚¤ã‚ºã‚’å¯è¦–åŒ–ã™ã‚‹ã“ã¨ãŒã§ãã‚‹ãƒ­ãƒ¼ã‚«ãƒ«ã‚µãƒ¼ãƒãƒ¼ã‚’ç«‹ã¡ä¸Šã’ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚ä¾¿åˆ©ã€‚

## ä¸»ãªå¤‰æ›´ç‚¹

https://webpack.js.org/blog/2020-10-10-webpack-5-release/#major-changes-removals

ã“ã®ã‚ˆã†ãªå¤‰æ›´ç‚¹ãŒã‚ã‚Šã¾ã™ã€‚

- æ°¸ç¶šçš„ãªã‚­ãƒ£ãƒƒã‚·ãƒ³ã‚°
- TS ã®å¯¾å¿œã§`@types/webpack`ãŒä¸è¦ã«ãªã‚Šã€`import { WebpackOptionsNormalized } from 'webpack';` ã§åž‹ã‚’ import ã§ãã‚‹ã‚ˆã†ã«ãªã£ãŸã€‚(ãƒ•ã‚¡ã‚¤ãƒ«åã‚’ webpack.config.ts ã«ã™ã‚‹å¿…è¦ãŒã‚ã‚‹)
- Tree Shaking ã®æœ€é©åŒ–ãŒå…¥ã‚Šãƒãƒ³ãƒ‰ãƒ«ã‚µã‚¤ã‚ºç¸®å°ã«æœŸå¾…ã§ãã‚‹
- CommonJs ã® Tree Shaking å¯¾å¿œ
- css ã® chunk ãŒå¯èƒ½ã«ãªã£ãŸ([MiniCssExtractPlugin](https://webpack.js.org/plugins/mini-css-extract-plugin/)ä½¿ç”¨æ™‚ã«ã§ãã‚‹)

ã“ã“ã§ã¯ç‰¹ã«å¤§ããªç ´å£Šçš„å¤‰æ›´ã‚’ 2 ã¤ã»ã©ç´¹ä»‹ã—ã¾ã™ã€‚

### Node.js ã® polyfill ã‚’è‡ªå‹•ã§æŒ¿å…¥ã—ãªããªã£ãŸ

webpack ã‚’ä½¿ç”¨ã™ã‚Œã°ã€Node.js ã®ã‚³ãƒ¼ãƒ‰ã‚’ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚µã‚¤ãƒ‰ã§ä½¿ç”¨ã—ã€è‡ªå‹•ã§ polyfill ã‚’æŒ¿å…¥ã—ã¦ãã‚Œã¦ã„ã¾ã—ãŸã€‚

ä»Šå¾Œ webpack ã¯ Web ã§å‹•ä½œã™ã‚‹ã‚³ãƒ¼ãƒ‰ã«ç„¦ç‚¹ã‚’å½“ã¦ã¦ã„ããŸã‚ã€Node.js ã® polyfill ãŒãƒãƒ³ãƒ‰ãƒ«ã«å«ã¾ã‚Œã€çµæžœçš„ã«ãƒãƒ³ãƒ‰ãƒ«ã‚µã‚¤ã‚ºãŒãƒ‡ã‚«ããªãã‚‹ã“ã¨ã‚’æœ›ã¾ãªã„ã‚ˆã†ã«ãªã£ãŸã®ã§ã€
è‡ªå‹•ã§ polyfill ã‚’æŒ¿å…¥ã—ãªããªã‚Šã¾ã™ã€‚

polyfill ã‚’æŒ¿å…¥ã—ãŸã„å ´åˆã¯[webpack/node-libs-browser](https://github.com/webpack/node-libs-browser)ã‚’å‚ç…§ã—ã¦ã€è‡ªå‰ã§æŒ¿å…¥ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚
ã¾ãŸã€ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚µã‚¤ãƒ‰ã§ Node.js ã«ä¾å­˜ã—ãŸãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ä½¿ç”¨ã—ã¦ã„ã‚‹å ´åˆã¯ã€ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®å¯¾å¿œã‚’å¾…ã¤ã‹ã€ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰äº’æ›ã®ã‚ã‚‹ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã«å¤‰æ›´ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

`global`,`__filename`,`__dirname`ã‚‚ webpack ã®è¨­å®šã§ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ`false`ã«å¤‰æ›´ã•ã‚Œã‚‹ã®ã§ã€ä½¿ç”¨ã—ãŸã„å ´åˆã¯æ˜Žç¤ºçš„ã«å¤‰æ›´ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

### ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆãƒ©ãƒ³ã‚¿ã‚¤ãƒ ãŒä¸€éƒ¨ ES2015 ã«ãªã£ãŸ

webpack ãŒç”Ÿæˆã™ã‚‹ã‚³ãƒ¼ãƒ‰ãŒä¸€éƒ¨ ES2015 ã«ãªã£ãŸã®ã§ã€æ˜Žç¤ºçš„ã« es5 ã¸ã®å¯¾å¿œãŒå¿…è¦ã«ãªã‚Šã¾ã—ãŸã€‚
browserslist ã®ã‚µãƒãƒ¼ãƒˆãŒå«ã¾ã‚ŒãŸã®ã§ã€browserslist ã®è¨­å®š or webpack ã®è¨­å®šã‚’å¤‰ãˆã‚‹ã€ï¼’ã¤ã®é¸æŠžè‚¢ãŒã‚ã‚Šã¾ã™ã€‚

- webpack ã®è¨­å®š

webpack.config.js

```
module.exports = {
  target: ['web','es5']
};
```

- browserslist ã®è¨­å®š

.browserslistrc

```
last 1 version
ie >= 11
```

package.json

```
  "browserslist": [
    "last 1 version",
    "> 1%",
    "ie >= 11"
  ]
```

