{"componentChunkName":"component---src-post-template-js","path":"/posts/2021-04","result":{"data":{"markdownRemark":{"html":"<h3 id=\"mdn-のフレームワークガイドに-angular-チュートリアルが追加された\" style=\"position:relative;\"><a href=\"#mdn-%E3%81%AE%E3%83%95%E3%83%AC%E3%83%BC%E3%83%A0%E3%83%AF%E3%83%BC%E3%82%AF%E3%82%AC%E3%82%A4%E3%83%89%E3%81%AB-angular-%E3%83%81%E3%83%A5%E3%83%BC%E3%83%88%E3%83%AA%E3%82%A2%E3%83%AB%E3%81%8C%E8%BF%BD%E5%8A%A0%E3%81%95%E3%82%8C%E3%81%9F\" aria-label=\"mdn のフレームワークガイドに angular チュートリアルが追加された permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>MDN のフレームワークガイドに Angular チュートリアルが追加された</h3>\n<ul>\n<li>共有者: lacolaco</li>\n</ul>\n<p><a href=\"https://developer.mozilla.org/en-US/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Understanding client-side JavaScript frameworks - Learn web development | MDN</a> にはこれまで React, Ember, Vue, Svelte のチュートリアルがあったが、そこに Angular も追加された。</p>\n<p><a href=\"https://developer.mozilla.org/en-US/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks#angular_tutorials\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Angular tutorials</a></p>\n<p>Google の Angular Docs チームがチュートリアルを作成して提供したらしい。</p>\n<p><a href=\"https://github.com/mdn/content/pull/3972\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">adding angular docs by chrisdavidmills · Pull Request #3972 · mdn/content</a></p>\n<hr>\n<h3 id=\"e2e-テストツールの-protractor-の開発終了計画\" style=\"position:relative;\"><a href=\"#e2e-%E3%83%86%E3%82%B9%E3%83%88%E3%83%84%E3%83%BC%E3%83%AB%E3%81%AE-protractor-%E3%81%AE%E9%96%8B%E7%99%BA%E7%B5%82%E4%BA%86%E8%A8%88%E7%94%BB\" aria-label=\"e2e テストツールの protractor の開発終了計画 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>E2E テストツールの Protractor の開発終了計画</h3>\n<ul>\n<li>共有: lacolaco</li>\n</ul>\n<p><a href=\"https://github.com/angular/protractor/issues/5502\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Future of Angular E2E &#x26; Plans for Protractor · Issue #5502 · angular/protractor</a></p>\n<p>2013 年から Angular チームが開発してきた E2E ツール <a href=\"https://github.com/angular/protractor\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Protractor</a> を 2022 年をもって終了する計画。</p>\n<ul>\n<li>v12 (今年 5 月) から新規プロジェクトへのデフォルト導入を廃止</li>\n<li>v15 (来年冬）にメンテナンス終了</li>\n</ul>\n<p>Angular CLI の <code class=\"language-text\">ng e2e</code> コマンドは互換性のあるサードパーティ E2E ツールの導入によって機能するようになり、デフォルトでは実体を持たない予定。（<code class=\"language-text\">ng deploy</code> と AngularFire、<code class=\"language-text\">ng lint</code> と <code class=\"language-text\">angular-eslint</code> のような関係になる）</p>\n<p>背景:</p>\n<ul>\n<li>\n<p>2013 年当初、まだ WebDriver API が標準化されていない時期、非同期処理をサポートした E2E テストのために Protractor を開発した</p>\n<ul>\n<li>Promise による非同期コールバック地獄をどう克服するかが焦点</li>\n<li>（WebDriver って W3C に Spec あったの初めて知った <a href=\"https://www.w3.org/TR/webdriver/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">https://www.w3.org/TR/webdriver/</a>)</li>\n</ul>\n</li>\n<li>\n<p>WebDriverJS(Selenium)や Protractor は Promise Manager（あるいは Control Flow）と呼ばれる機能を実装し、E2E テストケースの記述に Promise が登場しないようにした</p>\n<ul>\n<li>テストケース上は同期的に書けるような API</li>\n<li><a href=\"https://github.com/SeleniumHQ/selenium/wiki/WebDriverJs#introduction\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">https://github.com/SeleniumHQ/selenium/wiki/WebDriverJs#introduction</a></li>\n<li>Puppetter や Cypress の書き味のベースになっているのがよくわかる</li>\n</ul>\n</li>\n<li>\n<p><code class=\"language-text\">async/await</code> の登場</p>\n<ul>\n<li>Promise Manager なしでも同期処理のような書き方でテストが書けるようになった</li>\n<li><code class=\"language-text\">async/await</code> には JavaScript からフックできないため、Promise Manager とは互換性がない</li>\n</ul>\n</li>\n<li>\n<p>2013 年からメンテナンスされてきた Protractor を ES2017 ベースに作り変えるのは非常に労力がかかるため、サポートを終了する</p>\n<ul>\n<li>もともと AngularJS アプリの E2E テストのために作ったが AngularJS も今年で EOL なので、維持する理由がほぼなくなった</li>\n</ul>\n</li>\n</ul>\n<hr>\n<h3 id=\"cookie-利用通知のベストプラクティス\" style=\"position:relative;\"><a href=\"#cookie-%E5%88%A9%E7%94%A8%E9%80%9A%E7%9F%A5%E3%81%AE%E3%83%99%E3%82%B9%E3%83%88%E3%83%97%E3%83%A9%E3%82%AF%E3%83%86%E3%82%A3%E3%82%B9\" aria-label=\"cookie 利用通知のベストプラクティス permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Cookie 利用通知のベストプラクティス</h3>\n<ul>\n<li>共有: lacolaco</li>\n</ul>\n<p><a href=\"https://web.dev/cookie-notice-best-practices/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Best practices for cookie notices</a></p>\n<p>web.dev より、パフォーマンスやユーザー体験をできるだけ損なわないように Cookie の利用表示を出すためのプラクティス</p>\n<ul>\n<li>\n<p>Cookie 通知スクリプトは非同期で読み込む</p>\n<ul>\n<li>できるだけ Resource Hints も使って先読みする</li>\n</ul>\n</li>\n<li>\n<p>Testing cookie notices with WebPageTest</p>\n<ul>\n<li>WebPageTest の機能で Cookie 通知のボタンを押すところまでをテストできる</li>\n</ul>\n</li>\n<li>\n<p>Testing cookie notices with Lighthouse</p>\n<ul>\n<li><code class=\"language-text\">Clear Storage</code> でテストすれば Cookie 通知が出る状態をテストできる</li>\n<li>CLI の場合は <code class=\"language-text\">--extra-headers</code> で任意の Cookie を無理やりつけてテストできる</li>\n</ul>\n</li>\n<li>\n<p>Placement</p>\n<ul>\n<li>ヘッダーかフッターが一般的</li>\n<li>特にフッターはレイアウトシフトも起こさないので推奨</li>\n<li>インラインも有効だが実装の組み込みが容易じゃない場合が多く選択されにくい</li>\n<li>モーダル</li>\n<li>小さい部分モーダルなら CLS を引き起こさず邪魔にならない通知を出す手段になる可能性</li>\n<li>\n<p>全画面モーダルはユーザーの脱落が起こりやすいため注意</p>\n<ul>\n<li>\n<blockquote>\n<p>フルスクリーンの Cookie 同意モーダルの使用を検討している場合は、<a href=\"https://techcrunch.com/2020/05/06/no-cookie-consent-walls-and-no-scrolling-isnt-consent-says-eu-data-protection-body/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">cookie walls</a>に関する法律に注意する必要があります。</p>\n</blockquote>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<hr>\n<h3 id=\"サードパーティスクリプトをコントロール下に置く\" style=\"position:relative;\"><a href=\"#%E3%82%B5%E3%83%BC%E3%83%89%E3%83%91%E3%83%BC%E3%83%86%E3%82%A3%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%97%E3%83%88%E3%82%92%E3%82%B3%E3%83%B3%E3%83%88%E3%83%AD%E3%83%BC%E3%83%AB%E4%B8%8B%E3%81%AB%E7%BD%AE%E3%81%8F\" aria-label=\"サードパーティスクリプトをコントロール下に置く permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>サードパーティスクリプトをコントロール下に置く</h3>\n<ul>\n<li>共有: lacolaco</li>\n</ul>\n<p><a href=\"https://web.dev/controlling-third-party-scripts/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Keeping third-party scripts under control</a></p>\n<ul>\n<li>サードパーティスクリプトをコントローラブルな状態で利用するためのガバナンス設計</li>\n<li>\n<p>Tag governance process</p>\n<ul>\n<li>コンプライアンス</li>\n<li>必要性の確認</li>\n<li>オーナーシップの明確化</li>\n<li>利用用途の明確化</li>\n<li>\n<blockquote>\n<p>Furthermore, have there been any commercial vs performance trade-off discussions? If there is a tag that is deemed as \"required\" because it brings in revenue, has there been an analysis to the potential revenue lost through speed regression</p>\n</blockquote>\n</li>\n<li>定期的なレビュー</li>\n<li>Web サイトのスクリプトのサイズやサードパーティスクリプトの数など、気づかないうちに肥大化することを防ぐ</li>\n<li>パフォーマンスバジェットとして定義して CI などで確認することもできるかもしれない</li>\n</ul>\n</li>\n</ul>\n<hr>\n<h3 id=\"april-2021-73---babelproposal\" style=\"position:relative;\"><a href=\"#april-2021-73---babelproposal\" aria-label=\"april 2021 73   babelproposal permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><a href=\"https://github.com/babel/proposals/issues/73\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">April 2021 #73 - babel/proposal</a></h3>\n<ul>\n<li>共有者: sosukesuzuki</li>\n</ul>\n<p>Google の Justin Ridgewell が TC39 ミーティングがあるたびにプロポーザルの変動を教えてくれる Issue 2021 年 4 月版。</p>\n<p>今回の見どころ</p>\n<ul>\n<li>Class Features が Stage 4 になり ES2022 となる初めての提案に</li>\n<li>object.has が今回初登場にも関わらず Stage 1 を飛ばして一気に Stage 2 へ</li>\n</ul>\n<h4 id=\"0---1\" style=\"position:relative;\"><a href=\"#0---1\" aria-label=\"0   1 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>0 -> 1</h4>\n<ul>\n<li>\n<p><a href=\"https://github.com/Jack-Works/proposal-readonly-arraybuffer/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Read-only ArrayBuffer</a></p>\n<ul>\n<li>freeze できる ArrayBuffer</li>\n</ul>\n</li>\n<li>\n<p><a href=\"https://github.com/Jack-Works/proposal-arraybuffer-fixed-view\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Fixed view of ArrayBuffer</a></p>\n<ul>\n<li>DataView から .buffer が読めない ArrayBuffer</li>\n</ul>\n</li>\n<li>\n<p><a href=\"https://github.com/rricard/proposal-change-array-by-copy\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Change Array by copy</a></p>\n<ul>\n<li>イミュータブルな配列操作メソッド</li>\n</ul>\n</li>\n</ul>\n<h4 id=\"0---2\" style=\"position:relative;\"><a href=\"#0---2\" aria-label=\"0   2 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>0 -> 2</h4>\n<ul>\n<li>\n<p><a href=\"https://github.com/jamiebuilds/proposal-object-has\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">object.has</a></p>\n<ul>\n<li><code class=\"language-text\">hasOwnProperty</code> のスタティックメソッド版</li>\n</ul>\n</li>\n</ul>\n<h4 id=\"1---2\" style=\"position:relative;\"><a href=\"#1---2\" aria-label=\"1   2 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1 -> 2</h4>\n<ul>\n<li>\n<p><a href=\"https://github.com/tc39/proposal-symbols-as-weakmap-keys\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Symbols as WeakMap keys</a></p>\n<ul>\n<li>WeakMap のキーとしてシンボルを使えるようになる</li>\n</ul>\n</li>\n</ul>\n<h4 id=\"3---4\" style=\"position:relative;\"><a href=\"#3---4\" aria-label=\"3   4 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3 -> 4</h4>\n<p>ES2022 に入るはじめての提案</p>\n<ul>\n<li><a href=\"https://github.com/tc39/proposal-class-fields\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Class Fields</a></li>\n<li><a href=\"https://github.com/tc39/proposal-private-methods\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Private methods</a></li>\n<li><a href=\"https://github.com/tc39/proposal-static-class-features\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Static class features</a></li>\n</ul>\n<hr>\n<h3 id=\"slow-and-steady-converting-sentrys-entire-frontend-to-typescript\" style=\"position:relative;\"><a href=\"#slow-and-steady-converting-sentrys-entire-frontend-to-typescript\" aria-label=\"slow and steady converting sentrys entire frontend to typescript permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><a href=\"https://blog.sentry.io/2021/04/12/slow-and-steady-converting-sentrys-entire-frontend-to-typescript\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Slow and Steady: Converting Sentry’s Entire Frontend to TypeScript</a></h3>\n<ul>\n<li>共有者: sakito</li>\n</ul>\n<p>Sentry を 12 人で 1 年間かけて 1100 ファイル(9,500 行)を TS に置き換えたはなしです。</p>\n<p>TS に置き換える話は昨今よくある話ですが、この記事では取り組みについて啓蒙活動から具体的なアクションまで説明されています。</p>\n<p>チームの教育 => 開発しやすいように基盤の構築 => 戦略を立てていく(頻繁に使用するファイルから倒していく) => モチベの維持(slackbot で進捗を可視化など)の流れで進めたとのことです。</p>\n<p>TS の置き換えが終わるまで、React の hooks 化やライブラリーのアップデートを行わず集中してやったとも書かれています。</p>\n<p>TS に置き換える以外でも参考になる話でした。</p>\n<hr>\n<h3 id=\"solving-a-mystery-behavior-of-parseint-in-javascript\" style=\"position:relative;\"><a href=\"#solving-a-mystery-behavior-of-parseint-in-javascript\" aria-label=\"solving a mystery behavior of parseint in javascript permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><a href=\"https://dmitripavlutin.com/parseint-mystery-javascript/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Solving a Mystery Behavior of parseInt() in JavaScript</a></h3>\n<ul>\n<li>共有者: pirosikick</li>\n</ul>\n<p>小ネタ。<code class=\"language-text\">parseInt(0.000005)</code>は<code class=\"language-text\">0</code>を返すのに、<code class=\"language-text\">parseInt(0.0000005)</code>は<code class=\"language-text\">5</code>を返す件について。最近、別件で parseInt 関数の仕様を調べる機会があったので紹介。</p>\n<p><a href=\"https://tc39.es/ecma262/#sec-parseint-string-radix\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">parseInt 関数の仕様</a>は、かなりざ〜っくり説明すると以下のとおり。</p>\n<ul>\n<li>parseInt(string, radix)</li>\n<li>inputString = ToString(string)</li>\n<li>inputString の先頭のスペースを trim する</li>\n<li>radix が<code class=\"language-text\">0</code> or <code class=\"language-text\">undefined</code>の場合は、radix = 10 とするけど、string の先頭が\"0x\" or \"0X\"の場合は radix = 16</li>\n<li>radix が<code class=\"language-text\">16</code>の場合、string は\"0x\" or \"0X で始まってもいい</li>\n<li>radix &#x3C; 2 || radix > 36 → return NaN</li>\n<li>\n<p>先頭の<code class=\"language-text\">+</code>,<code class=\"language-text\">-</code>（プラス、マイナス）は取り除いて、\nradix 進数の範囲外の文字が見つかったらその文字の前までの文字列を評価する</p>\n<ul>\n<li>例）radix が<code class=\"language-text\">2</code>で<code class=\"language-text\">\"0101012\"</code>が入力された場合、<code class=\"language-text\">\"010101\"</code>を評価する</li>\n</ul>\n</li>\n<li>先頭が<code class=\"language-text\">-</code>の場合は、-1 を掛ける</li>\n</ul>\n<p>parseInt 関数の第 1 引数は<code class=\"language-text\">ToString</code>されるので、<code class=\"language-text\">0.0000005</code>は<code class=\"language-text\">\"5e-7\"</code>になる（ちなみに、<code class=\"language-text\">String(0.000005)</code>は<code class=\"language-text\">\"0\"</code>）。「radix 進数の範囲外の文字が見つかったらその文字の前までの文字列を評価する」ので<code class=\"language-text\">\"5\"</code>だけ評価され、<code class=\"language-text\">5</code>を返す。</p>\n<p>ちなみに、「radix 進数の範囲外の文字が見つかったらその文字の前までの文字列を評価する」という仕様は、<code class=\"language-text\">\"10px\"</code>のような数字 + suffix の文字列から数字だけを取り出すときに便利。</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token function\">parseInt</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"10px\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// => 10</span></code></pre></div>\n<hr>\n<h3 id=\"今月の-ie11-関連情報\" style=\"position:relative;\"><a href=\"#%E4%BB%8A%E6%9C%88%E3%81%AE-ie11-%E9%96%A2%E9%80%A3%E6%83%85%E5%A0%B1\" aria-label=\"今月の ie11 関連情報 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>今月の IE11 関連情報</h3>\n<ul>\n<li>共有者: nakajmg</li>\n</ul>\n<p>今月も IE サポートを終了したり終了の予告を出すサービスや会社がありました。</p>\n<ul>\n<li><a href=\"https://help.abema.tv/hc/ja/articles/360055647611\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">ABEMA が 4/21 をもって IE11 のサポートを終了した</a></li>\n<li><a href=\"https://help.hulu.jp/hc/ja/articles/900005502846\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">hulu が 2021/07/14 でサポートを終了を予告</a></li>\n</ul>\n<p>IE11 関連の動きが気になる方は<a href=\"https://docs.google.com/document/d/1XP58gVMyp_UCP4FFsf5ATpvRVwqi7v_EpEF3sl_Sobk\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">IE11 サポート終了の歴史</a>をチェック。</p>\n<hr>\n<h3 id=\"deps-add-yarn-1225-by-arcanis-·-pull-request-37277-·-nodejsnode\" style=\"position:relative;\"><a href=\"#deps-add-yarn-1225-by-arcanis-%C2%B7-pull-request-37277-%C2%B7-nodejsnode\" aria-label=\"deps add yarn 1225 by arcanis · pull request 37277 · nodejsnode permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><a href=\"https://github.com/nodejs/node/pull/37277\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">deps: add Yarn 1.22.5 by arcanis · Pull Request #37277 · nodejs/node</a></h3>\n<ul>\n<li>共有者: shisama</li>\n</ul>\n<p>yarn v1をNode.js本体に追加するPRが出ています。</p>\n<p>これがマージされれば、npmで個別にyarnをインストールしなくてもNode.jsをインストールするだけでyarnも使えるようになります。</p>\n<p>ただ、yarnはすでにv2がリリースされていて、今後はyarn v2がメンテされていきます。\nそのため、v1すでにレガシーという意見もありますが、現状<code class=\"language-text\">npm install yarn</code>ではv1がインストールされる現状やv1は今でも利用者が多いことや、yarn v2を使いたいユーザーにとっても価値のあるものとしてyarn v1を選んだとのこと。</p>\n<blockquote>\n<p>Yarn 1 isn't legacy\n<a href=\"https://github.com/nodejs/node/pull/37277#issuecomment-775586604\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">https://github.com/nodejs/node/pull/37277#issuecomment-775586604</a></p>\n</blockquote>\n<p>yarnを加えること自体に賛否があります。\nyarnはnpmよりパフォーマンスなど優れているんだからyarnは入れるべきという意見や、メンテコストが上がるから増やすべきではないという意見があります。そもそもNode.js本体にパッケージマネージャーは入れなくてもいいのではという意見もあります。</p>\n<p>しかし現行のnpmはyarn v1と同じぐらい優れているし、yarn v1には修正されない重大なバグもある、複数パッケージがあると初心者は混乱するのではないかと指摘があります。\n<a href=\"https://github.com/nodejs/node/pull/37277#issuecomment-817898794\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">https://github.com/nodejs/node/pull/37277#issuecomment-817898794</a></p>\n<p>もう一案としてはcorepack経由でyarnをNode.js本体に含めるという案もあります。\n<a href=\"https://github.com/nodejs/node/pull/37277#issuecomment-819824338\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">https://github.com/nodejs/node/pull/37277#issuecomment-819824338</a></p>\n<p>corepackはyarnとかpnpmなどnpm以外のパッケージマネージャーを一括管理するツールです。現在はnodejs管理下に置かれています。今でもnpmからインストールして使えます。\n<a href=\"https://github.com/nodejs/corepack\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">https://github.com/nodejs/corepack</a></p>\n<p>corepackをNode.js本体に入れるPRも出ています。\n<a href=\"https://github.com/nodejs/node/pull/35398\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">https://github.com/nodejs/node/pull/35398</a></p>\n<p>今週末にTSCのMTGがあって、この件もAgendaに載っているので何らかの動きがありそう。</p>\n<p>Node.js関連だと4/20にNode.js v16がリリースされました。\nM1 MacでもNode.jsが動くようになったり、timers/promisesが便利だったりします。\nあと、Node.js v10が4/30でEnd-of-Lifeなので、移行してください。</p>\n<ul>\n<li><a href=\"https://nodejs.org/en/blog/release/v16.0.0/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Node v16.0.0 (Current) | Node.js</a></li>\n<li><a href=\"https://shisama.hatenablog.com/entry/2021/04/22/090000\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Node.js v16 の主な変更点 - 別にしんどくないブログ</a></li>\n</ul>\n<hr>\n<h3 id=\"css-is-a-strongly-typed-language\" style=\"position:relative;\"><a href=\"#css-is-a-strongly-typed-language\" aria-label=\"css is a strongly typed language permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><a href=\"https://css-tricks.com/css-is-a-strongly-typed-language/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">CSS is a Strongly Typed Language</a></h3>\n<ul>\n<li>共有者: b4h0_c4t</li>\n</ul>\n<p>名前から強めの思想を感じ取ったので共有。</p>\n<p>最近 TypeScript のような強い型付け言語がはやっているけど、CSSも強い型付け言語なんだよ、という話しの読み物系記事。\nCSSプロパティの型リストが書いてあったり、CSSのレジリエンスについて幾つかのエラーケースをもとにCodePenで解説していたりと学びも多いと思います。</p>\n<hr>","frontmatter":{"title":"Cybozu Frontend Monthly","date":"2021-04-27T17:00:00+09:00","no":10,"connpass":"https://cybozu.connpass.com/event/211827/","streamUrl":"https://www.youtube.com/watch?v=LssNt4WtnyA","hashTag":null,"members":[{"name":"@koba04","link":"https://twitter.com/koba04"},{"name":"@pirosikick","link":"https://twitter.com/pirosikick"},{"name":"@__sakito__","link":"https://twitter.com/__sakito__"},{"name":"@shisama_","link":"https://twitter.com/shisama_"},{"name":"@nakajmg","link":"https://twitter.com/nakajmg"},{"name":"@b4h0_c4t","link":"https://twitter.com/b4h0_c4t"},{"name":"@__sosukesuzuki","link":"https://twitter.com/__sosukesuzuki"}],"guest":[{"name":"@lacolaco","link":"https://twitter.com/laco2net"}]}}},"pageContext":{"id":"f79dd091-ffe2-5c58-9d64-e66344e1ae50"}},"staticQueryHashes":["764694655"]}